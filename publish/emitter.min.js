"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_createClass=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var hasOwnProperty=Object.prototype.hasOwnProperty,Emitter=function(){function a(b){_classCallCheck(this,a),this.Set(b)}return _createClass(a,[{key:"Set",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},b=this;if(!a)return b;for(var c in a)if(hasOwnProperty.call(a,c)&&void 0!==a[c])switch(_typeof(b[c])){case"number":{b[c]=isNaN(+param)?0:+param;break}case"boolean":{b[c]="true"===a[c]||"1"===a[c];break}default:{b[c]=a[c];break}}return b}},{key:"Emit",value:function(b,c){var d=this,e=d[a.eventPrefix+b];if(!e||!e.length)return d;var f=-1,g=e.length;for(console.log("callbacks!",e);++f<g;){var h=e[f];if(!0===h(c)){e.splice(f--,1),g--;continue}switch(_typeof(h.data)){case"number":{1>--h.data&&(e.splice(f--,1),g--);break}case"boolean":{h.data&&(e.splice(f--,1),g--);break}}}return d}},{key:"On",value:function(b,c,d){var e=this;return c?(b=a.eventPrefix+b,e[b]||(e[b]=[]),c.data=d,e[b].push(c),e):e}},{key:"Off",value:function(b,c){var d=this;if(b=a.eventPrefix+b,!d[b])return d;if(!c)return delete d[b],d;for(var e,f=d[b],g=f.length;g--;)switch(e=f[g],"undefined"==typeof identifer?"undefined":_typeof(identifer)){case"string":{e.data===identifier&&f.splice(g,1);break}default:{e===identifier&&f.splice(g,1);break}}return d}}]),a}();Emitter.eventPrefix="event.",exports.default=Emitter,"use strict",Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),_Emitter2=require("@/core/Emitter"),_Emitter3=_interopRequireDefault(_Emitter2);function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&("object"==typeof b||"function"==typeof b)?b:a}function _inherits(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var hasOwnProperty=Object.prototype.hasOwnProperty,instance=null,Message=function(a){function b(a){_classCallCheck(this,b);var c=_possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a)),d=c;return instance?(console.error("Only one message instance can be used at any one time"),_possibleConstructorReturn(c)):(d.listeners={},d.On(b.EVENTS.GARBAGE_COLLECT,function(a){d.Remove(a)}),instance=d,c)}return _inherits(b,a),_createClass(b,[{key:"Watch",value:function(a,b){var c=this;return b.On(a,function(b){c.Emit(a,b)}),c}},{key:"Remove",value:function(a){var b=this;if(a)return b.Off(a);for(var c in b)hasOwnProperty.call(b,c)&&c.match(/^event\./)&&b.Off(c);return b}}],[{key:"Instance",value:function(a){return instance||new b(a)}}]),b}(_Emitter3.default);Message.EVENTS={GARBAGE_COLLECT:"message.garbagecollect"},exports.default=Message;